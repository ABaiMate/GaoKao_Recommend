import{d as R,z as L,f as D,o as i,b as f,C as E,D as H,m as T,B as z,r as m,g as s,h as A,i as u,j as t,q as Q,u as w,F as V,l as o,s as W,x as J,y as K,t as _}from"./index-d31968a7.js";import{R as O,H as P,u as X,a as Y}from"./useRequest-4cb19bee.js";import{u as Z,F as k,a as M}from"./useValid-d1447d9b.js";import{u as ee}from"./useFormRules-cbf82972.js";import{u as te}from"./useNotify-cedc1ad3.js";const oe={getList:(r,d,v,c,p)=>new O(P.GET,"/recommend/list",{type:r,field:d,subjectType:v,score:c,order:p})},le=R({__name:"Link",props:{to:{}},setup(r){const d=r,v=L();D(()=>{});function c(a){v.push(a)}function p(a){location.hash.startsWith("#")?window.open("/#"+a):window.open(a)}return(a,l)=>(i(),f("a",{class:"link cursor-pointer text-bold",onClick:l[0]||(l[0]=b=>c(d.to)),onContextmenu:l[1]||(l[1]=H(b=>p(d.to),["stop","prevent","right"]))},[E(a.$slots,"default",{},void 0,!0)],32))}});const ne=T(le,[["__scopeId","data-v-3e308883"]]),se=r=>(J("data-v-21c1fb52"),r=r(),K(),r),ae={class:"TheRecommend"},ue={class:"row justify-between q-my-md"},re=se(()=>o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"学校名称"),o("th",{class:"text-left"},"省份"),o("th",{class:"text-left"},"2020年分数/排名"),o("th",{class:"text-left"},"2021年分数/排名"),o("th",{class:"text-left"},"2022年分数/排名"),o("th",{class:"text-left"},"预测分数/排名")])],-1)),de=["textContent"],ce=["textContent"],_e=["textContent"],ie=["textContent"],pe=["textContent"],me=R({__name:"TheRecommend",setup(r){te(),z();const d=X();L();const{formRules:v,validNull:c}=ee(),p=Z(),a=Y();let l=m({score:0,order:0,show:!1}),b=m([]),h=m("稳"),q=m("文科"),y=m("score");async function x(){a.start(),b.value=await d.run(oe.getList(h.value,y.value,q.value,l.value.score,l.value.order)).finally(a.close)}async function F(){await p.submit(),await x(),l.value.show=!0}return(fe,n)=>{const I=s("q-item-label"),N=s("q-form"),B=s("q-card-section"),S=s("q-btn"),U=s("q-card-actions"),$=s("q-card"),g=s("q-btn-toggle"),C=s("q-tab"),j=s("q-tabs"),G=s("q-markup-table");return i(),f("div",ae,[l.value.show?(i(),f(V,{key:1},[o("div",ue,[t(g,{modelValue:q.value,"onUpdate:modelValue":[n[2]||(n[2]=e=>q.value=e),x],"toggle-color":"blue",options:[{label:"文科",value:"文科"},{label:"理科",value:"理科"}],unelevated:""},null,8,["modelValue"]),t(g,{modelValue:y.value,"onUpdate:modelValue":[n[3]||(n[3]=e=>y.value=e),x],"toggle-color":"blue",options:[{label:"按分数推荐",value:"score"},{label:"按排名推荐",value:"order"}],unelevated:""},null,8,["modelValue"])]),t(j,{modelValue:h.value,"onUpdate:modelValue":[n[4]||(n[4]=e=>h.value=e),x],align:"justify","active-color":"white","active-bg-color":"blue"},{default:u(()=>[t(C,{name:"冲",label:"冲"}),t(C,{name:"稳",label:"稳"}),t(C,{name:"保",label:"保"})]),_:1},8,["modelValue"]),t(G,{class:"no-shadow"},{default:u(()=>[re,o("tbody",null,[(i(!0),f(V,null,W(b.value,e=>(i(),f("tr",{key:e.id},[o("td",null,[t(ne,{textContent:_(e.schoolName),to:`/school/${e.id}`},null,8,["textContent","to"])]),o("td",{textContent:_(e.province)},null,8,de),o("td",{textContent:_((e.scoreMap[2020]??"-")+"/"+(e.orderMap[2020]??"-"))},null,8,ce),o("td",{textContent:_((e.scoreMap[2021]??"-")+"/"+(e.orderMap[2021]??"-"))},null,8,_e),o("td",{textContent:_((e.scoreMap[2022]??"-")+"/"+(e.orderMap[2022]??"-"))},null,8,ie),o("td",{textContent:_((e.scoreMap.GM??"-")+"/"+(e.orderMap.GM??"-"))},null,8,pe)]))),128))])]),_:1})],64)):(i(),A($,{key:0,class:"q-my-md absolute-center",style:{width:"500px"},flat:"",bordered:""},{default:u(()=>[t(I,{header:""},{default:u(()=>[Q("请输入基础信息")]),_:1}),t(B,null,{default:u(()=>[t(N,{ref:"formRef",class:"form q-col-gutter-y-md"},{default:u(()=>[t(k,null,{default:u(()=>[t(M,{modelValue:l.value.score,"onUpdate:modelValue":n[0]||(n[0]=e=>l.value.score=e),label:"分数",rules:[e=>w(c)(e,!0)]},null,8,["modelValue","rules"])]),_:1}),t(k,null,{default:u(()=>[t(M,{modelValue:l.value.order,"onUpdate:modelValue":n[1]||(n[1]=e=>l.value.order=e),label:"排名",rules:[e=>w(c)(e,!0)]},null,8,["modelValue","rules"])]),_:1})]),_:1},512)]),_:1}),t(U,null,{default:u(()=>[t(S,{label:"确认",unelevated:"",class:"full-width",color:"blue",onClick:F})]),_:1})]),_:1}))])}}});const ye=T(me,[["__scopeId","data-v-21c1fb52"]]);export{ye as default};
