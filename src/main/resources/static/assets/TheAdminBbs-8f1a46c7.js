import{Q as V}from"./QueryContainer-778ca57d.js";import{Q}from"./QuerySearchCard-abfe6caa.js";import{Q as w}from"./QueryPagination-33101695.js";import{T as S}from"./TableContainer-6b49de73.js";import{T as U}from"./TableToolbar-630e4f38.js";import{Q as _}from"./QueryInput-b0beacee.js";import{B as A}from"./BbsDialog-d7a87b8f.js";import{d as P,B as L,r as f,f as N,g as R,o as g,b as v,j as l,i,F as z,s as E,x as F,y as O,l as t,t as u,m as $}from"./index-d31968a7.js";import{u as j}from"./useNotify-cedc1ad3.js";import{u as M,a as G}from"./useRequest-4cb19bee.js";import{a as H,u as J,D as h}from"./useDialog-abda8b4e.js";import{B as y}from"./BbsApi-9114505e.js";import{u as K}from"./usePage-8ca7a06e.js";import"./FormEditor-af66954e.js";import"./useValid-d1447d9b.js";import"./BaseDialog-82865103.js";import"./useFormRules-cbf82972.js";const n=d=>(F("data-v-413d80e3"),d=d(),O(),d),W={class:"admin-bbs"},X=n(()=>t("th",{class:"text-left"},"ID",-1)),Y=n(()=>t("th",{class:"text-left"},"创建时间",-1)),Z=n(()=>t("th",{class:"text-left"},"更新时间",-1)),ee=n(()=>t("th",{class:"text-left"},"用户ID",-1)),te=n(()=>t("th",{class:"text-left"},"标题",-1)),oe=n(()=>t("th",{class:"text-left"},"评论内容",-1)),le=n(()=>t("th",{class:"text-left"},"操作",-1)),ae=["textContent"],se=["textContent"],ne=["textContent"],ue=["textContent"],ie=["textContent"],de=["textContent"],re={class:"q-gutter-x-sm"},ce=P({__name:"TheAdminBbs",setup(d){const b=j();L();const x=M();G();const{toPage:k}=K(),{showDeleteDialog:D}=H();let p=f(),C=J(A),a=f({}),s=f({});N(()=>{});async function r(){p.value.loading.start(),s.value=await x.run(y.getPage({...a.value,...k(s.value)})).finally(p.value.loading.close)}function I(){C.show(h.ADD).onOk(r)}function B(c){C.show(h.EDIT,{id:c.id}).onOk(r)}async function T(c){await D()&&(await x.run(y.deleteById(c.id)),b.success("删除成功"),await r())}return(c,o)=>{const m=R("q-btn");return g(),v("div",W,[l(V,{query:a.value,"onUpdate:query":o[4]||(o[4]=e=>a.value=e),page:s.value,"onUpdate:page":o[5]||(o[5]=e=>s.value=e),onSearch:r},{default:i(()=>[l(Q,{ref_key:"querySearchRef",ref:p},{default:i(()=>[l(_,{modelValue:a.value.userId,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value.userId=e),label:"用户ID"},null,8,["modelValue"]),l(_,{modelValue:a.value.title,"onUpdate:modelValue":o[1]||(o[1]=e=>a.value.title=e),label:"标题"},null,8,["modelValue"]),l(_,{modelValue:a.value.content,"onUpdate:modelValue":o[2]||(o[2]=e=>a.value.content=e),label:"评论内容"},null,8,["modelValue"])]),_:1},512),l(U,null,{default:i(()=>[l(m,{label:"新增论坛",icon:"add",flat:"",onClick:I})]),_:1}),l(S,null,{header:i(()=>[X,Y,Z,ee,te,oe,le]),body:i(()=>[(g(!0),v(z,null,E(s.value.list??[],e=>(g(),v("tr",{key:e.id},[t("td",{textContent:u(e.id)},null,8,ae),t("td",{textContent:u(e.createTime)},null,8,se),t("td",{textContent:u(e.updateTime)},null,8,ne),t("td",{textContent:u(e.userId)},null,8,ue),t("td",{textContent:u(e.title)},null,8,ie),t("td",{textContent:u(e.content)},null,8,de),t("td",re,[l(m,{icon:"edit",label:"编辑",color:"blue",size:"sm",flat:"",dense:"",onClick:q=>B(e)},null,8,["onClick"]),l(m,{icon:"close",label:"删除",color:"orange",size:"sm",flat:"",dense:"",onClick:q=>T(e)},null,8,["onClick"])])]))),128))]),_:1}),l(w,{page:s.value,"onUpdate:page":o[3]||(o[3]=e=>s.value=e)},null,8,["page"])]),_:1},8,["query","page"])])}}});const Ve=$(ce,[["__scopeId","data-v-413d80e3"]]);export{Ve as default};
