import{Q as N}from"./QueryContainer-778ca57d.js";import{Q as A}from"./QuerySearchCard-abfe6caa.js";import{Q as R}from"./QueryPagination-33101695.js";import{T as E}from"./TableContainer-6b49de73.js";import{T as P}from"./TableToolbar-630e4f38.js";import{Q as y}from"./QueryInput-b0beacee.js";import{u as L,F as q,a as _}from"./useValid-d1447d9b.js";import{B as $}from"./BaseDialog-82865103.js";import{D as g,a as z,u as O}from"./useDialog-abda8b4e.js";import{u as F,a as G}from"./useRequest-4cb19bee.js";import{u as w}from"./useNotify-cedc1ad3.js";import{M as v}from"./MajorApi-605bf878.js";import{d as I,r as V,f as U,g as B,o as j,h as H,i as m,j as l,m as Q,B as J,b as k,F as K,s as W,x as X,y as Y,l as n,t as i}from"./index-d31968a7.js";import{u as Z}from"./usePage-8ca7a06e.js";const ee=I({__name:"MajorDialog",props:{type:{},id:{}},setup(f){const p=f,c=F(),b=L(),h=w();let a=V({});U(()=>{g.EDIT===p.type&&x()});async function x(){a.value=await c.run(v.getById(p.id))}async function u(d){await b.submit(),d.start();let o;switch(p.type){case g.ADD:o=v.create(a.value);break;case g.EDIT:o=v.modifyById(p.id,a.value);break;default:return}await c.run(o).finally(d.close),h.success("保存成功"),d.submit(a.value)}return(d,o)=>{const D=B("q-form");return j(),H($,{class:"major-dialog",title:"专业",type:p.type,onSubmit:u,persistent:""},{default:m(()=>[l(D,{ref:"formRef",class:"form q-col-gutter-y-md"},{default:m(()=>[l(q,null,{default:m(()=>[l(_,{modelValue:a.value.majorCode,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value.majorCode=e),label:"专业代码",rules:[e=>e&&e.length>0||"请输入专业代码"]},null,8,["modelValue","rules"]),l(_,{modelValue:a.value.majorName,"onUpdate:modelValue":o[1]||(o[1]=e=>a.value.majorName=e),label:"专业名称",rules:[e=>e&&e.length>0||"请输入专业名称"]},null,8,["modelValue","rules"])]),_:1}),l(q,null,{default:m(()=>[l(_,{modelValue:a.value.majorType,"onUpdate:modelValue":o[2]||(o[2]=e=>a.value.majorType=e),label:"专业类型",rules:[e=>e&&e.length>0||"请输入专业类型"]},null,8,["modelValue","rules"]),l(_,{modelValue:a.value.majorField,"onUpdate:modelValue":o[3]||(o[3]=e=>a.value.majorField=e),label:"专业门类",rules:[e=>e&&e.length>0||"请输入专业门类"]},null,8,["modelValue","rules"]),l(_,{modelValue:a.value.grantField,"onUpdate:modelValue":o[4]||(o[4]=e=>a.value.grantField=e),label:"授予门类",rules:[e=>e&&e.length>0||"请输入授予门类"]},null,8,["modelValue","rules"]),l(_,{modelValue:a.value.year,"onUpdate:modelValue":o[5]||(o[5]=e=>a.value.year=e),label:"修业年限",rules:[e=>e&&e.length>0||"请输入修业年限"]},null,8,["modelValue","rules"])]),_:1})]),_:1},512)]),_:1},8,["type"])}}});const te=Q(ee,[["__scopeId","data-v-11dfba12"]]),r=f=>(X("data-v-c2f94294"),f=f(),Y(),f),le={class:"admin-major"},oe=r(()=>n("th",{class:"text-left"},"ID",-1)),ae=r(()=>n("th",{class:"text-left"},"创建时间",-1)),ne=r(()=>n("th",{class:"text-left"},"更新时间",-1)),se=r(()=>n("th",{class:"text-left"},"专业代码",-1)),ue=r(()=>n("th",{class:"text-left"},"专业名称",-1)),de=r(()=>n("th",{class:"text-left"},"专业类型",-1)),re=r(()=>n("th",{class:"text-left"},"专业门类",-1)),ie=r(()=>n("th",{class:"text-left"},"授予门类",-1)),me=r(()=>n("th",{class:"text-left"},"修业年限",-1)),pe=r(()=>n("th",{class:"text-left"},"操作",-1)),fe=["textContent"],_e=["textContent"],ce=["textContent"],ye=["textContent"],ge=["textContent"],ve=["textContent"],xe=["textContent"],Ce=["textContent"],Ve=["textContent"],je={class:"q-gutter-x-sm"},be=I({__name:"TheAdminMajor",setup(f){const p=w();J();const c=F();G();const{toPage:b}=Z(),{showDeleteDialog:h}=z();let a=V(),x=O(te),u=V({}),d=V({});U(()=>{});async function o(){a.value.loading.start(),d.value=await c.run(v.getPage({...u.value,...b(d.value)})).finally(a.value.loading.close)}function D(){x.show(g.ADD).onOk(o)}function e(C){x.show(g.EDIT,{id:C.id}).onOk(o)}async function M(C){await h()&&(await c.run(v.deleteById(C.id)),p.success("删除成功"),await o())}return(C,s)=>{const T=B("q-btn");return j(),k("div",le,[l(N,{query:u.value,"onUpdate:query":s[6]||(s[6]=t=>u.value=t),page:d.value,"onUpdate:page":s[7]||(s[7]=t=>d.value=t),onSearch:o},{default:m(()=>[l(A,{ref_key:"querySearchRef",ref:a},{default:m(()=>[l(y,{modelValue:u.value.majorCode,"onUpdate:modelValue":s[0]||(s[0]=t=>u.value.majorCode=t),label:"专业代码"},null,8,["modelValue"]),l(y,{modelValue:u.value.majorName,"onUpdate:modelValue":s[1]||(s[1]=t=>u.value.majorName=t),label:"专业名称"},null,8,["modelValue"]),l(y,{modelValue:u.value.majorType,"onUpdate:modelValue":s[2]||(s[2]=t=>u.value.majorType=t),label:"专业类型"},null,8,["modelValue"]),l(y,{modelValue:u.value.majorField,"onUpdate:modelValue":s[3]||(s[3]=t=>u.value.majorField=t),label:"专业门类"},null,8,["modelValue"]),l(y,{modelValue:u.value.grantField,"onUpdate:modelValue":s[4]||(s[4]=t=>u.value.grantField=t),label:"授予门类"},null,8,["modelValue"])]),_:1},512),l(P,null,{default:m(()=>[l(T,{label:"新增专业",icon:"add",flat:"",onClick:D})]),_:1}),l(E,null,{header:m(()=>[oe,ae,ne,se,ue,de,re,ie,me,pe]),body:m(()=>[(j(!0),k(K,null,W(d.value.list??[],t=>(j(),k("tr",{key:t.id},[n("td",{textContent:i(t.id)},null,8,fe),n("td",{textContent:i(t.createTime)},null,8,_e),n("td",{textContent:i(t.updateTime)},null,8,ce),n("td",{textContent:i(t.majorCode)},null,8,ye),n("td",{textContent:i(t.majorName)},null,8,ge),n("td",{textContent:i(t.majorType)},null,8,ve),n("td",{textContent:i(t.majorField)},null,8,xe),n("td",{textContent:i(t.grantField)},null,8,Ce),n("td",{textContent:i(t.year)},null,8,Ve),n("td",je,[l(T,{icon:"edit",label:"编辑",color:"blue",size:"sm",flat:"",dense:"",onClick:S=>e(t)},null,8,["onClick"]),l(T,{icon:"close",label:"删除",color:"orange",size:"sm",flat:"",dense:"",onClick:S=>M(t)},null,8,["onClick"])])]))),128))]),_:1}),l(R,{page:d.value,"onUpdate:page":s[5]||(s[5]=t=>d.value=t)},null,8,["page"])]),_:1},8,["query","page"])])}}});const Ae=Q(be,[["__scopeId","data-v-c2f94294"]]);export{Ae as default};
