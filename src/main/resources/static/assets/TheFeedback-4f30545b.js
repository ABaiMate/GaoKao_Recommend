import{Q as N}from"./QueryPagination-33101695.js";import{U as P}from"./UserItem-db9f1dba.js";import{u as Q}from"./useDate-0b7f99ef.js";import{a as V}from"./useDialog-abda8b4e.js";import{u as D}from"./useLoginInfo-0c571403.js";import{u as R}from"./useNotify-cedc1ad3.js";import{u as U,a as z}from"./useRequest-4cb19bee.js";import{d as A,B as $,z as j,p,r as f,g as o,o as n,b as g,l as i,j as e,i as a,F as E,s as S,h as q,t as b,k as G,q as H,u as J,m as K}from"./index-d31968a7.js";import{u as M}from"./usePage-8ca7a06e.js";import{F as h}from"./FeedbackApi-dd3975b5.js";import"./avatar-dc521f05.js";import"./UserApi-7044f7f4.js";import"./useTimes-c127d28f.js";import"./LoginApi-1dda4bc2.js";const O={class:"feedback"},W={class:"text-right"},X={class:"q-mt-md"},Y={class:"text-caption"},Z=["textContent"],ee=A({__name:"TheFeedback",setup(te){const v=R();$();const c=U(),u=z(),{toPage:x}=M();j();const{showInputDialog:k}=V();let _=D();p(_,"loginInfo");let y=p(_,"onLoadedLoginInfo"),C=f({}),s=f({});y.value(()=>{l()});async function l(){u.start(),s.value=await c.run(h.getPage({...C.value,...x(s.value)})).finally(u.close)}async function w(){const d=await k("反馈","请输入反馈内容",!0);await c.run(h.create({content:d})),await l(),v.success("反馈成功")}return(d,m)=>{const I=o("q-btn"),r=o("q-item-section"),L=o("q-item-label"),F=o("q-chip"),T=o("q-item"),B=o("q-list");return n(),g("div",O,[i("div",W,[e(I,{label:"新增反馈",unelevated:"",color:"blue",class:"min-width-200",onClick:w})]),i("div",X,[e(B,null,{default:a(()=>[(n(!0),g(E,null,S(s.value.list??[],t=>(n(),q(T,{class:"q-table--bordered rounded-borders",clickable:"",to:`/home/feedback/${t.id}`},{default:a(()=>[e(r,{side:""},{default:a(()=>[e(P,{"user-id":t.userId},null,8,["user-id"])]),_:2},1024),e(r,null,{default:a(()=>[e(L,{textContent:b(t.content)},null,8,["textContent"])]),_:2},1024),e(r,{side:""},{default:a(()=>[t.feedback?(n(),q(F,{key:0,label:"已反馈",color:"red","text-color":"white",size:"xs",square:""})):G("",!0),i("div",Y,[H(" 创建于 "),i("span",{textContent:b(J(Q)(t.createTime))},null,8,Z)])]),_:2},1024)]),_:2},1032,["to"]))),256))]),_:1})]),e(N,{class:"q-my-xl",page:s.value,"onUpdate:page":[m[0]||(m[0]=t=>s.value=t),l],"no-search":""},null,8,["page"])])}}});const ge=K(ee,[["__scopeId","data-v-82dba618"]]);export{ge as default};
