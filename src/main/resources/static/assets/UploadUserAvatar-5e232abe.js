import{u as g}from"./useNotify-cedc1ad3.js";import{d as v,S as n,p as a,r as U,c as D,f as x,g as r,h as y,i as C,M as b,o as q,j as H,m as R}from"./index-d31968a7.js";const V=v({__name:"UploadUserAvatar",emits:[...n.emits],setup($,{emit:h}){const s=g(),o=n(),i=a(o,"dialogRef"),d=a(o,"onDialogOK");a(o,"onDialogCancel");const p=a(o,"onDialogHide");let t=U(!0),u=D(()=>`${location.protocol}//${location.host}/local-file/upload`);x(()=>{});function _(l){const e=JSON.parse(l.xhr.response);if(!e.success){s.error(e.message);return}s.success("上传成功"),d.value(e.data)}return(l,e)=>{const c=r("q-uploader"),m=r("q-dialog");return q(),y(m,b({modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=f=>t.value=f),ref_key:"dialogRef",ref:i},l.$attrs,{class:"upload-user-avatar",onHide:p.value}),{default:C(()=>[H(c,{url:u.value,label:"上传头像",accept:".jpg,.png,.gif,image/*","field-name":"file",onUploaded:_},null,8,["url"])]),_:1},16,["modelValue","onHide"])}}});const N=R(V,[["__scopeId","data-v-61adbf80"]]);export{N as U};
