import{d as v,z as I,A as Q,B as C,f as P,P as f,o as w,b as S,C as B,m as E}from"./index-d31968a7.js";function d(a){const o={};for(let[i,e]of Object.entries(a??{}))e!=null&&(typeof e=="string"&&(e=e.trim()),e!==""&&(o[i]=e));return o}const R={class:"query-container"},c="PAGE_SIZE",x=v({__name:"QueryContainer",props:{query:{},page:{},noInit:{type:Boolean},noRouteParam:{type:Boolean},withInitQuery:{type:Function,default:a=>a},withClear:{type:Function,default:a=>({})}},emits:["update:query","update:page","search","clear"],setup(a,{expose:o,emit:i}){const e=a,r=i,p=I(),u=Q(),s=C();P(()=>{e.noInit||l()});function l(){_(),q()}function _(){if(!e.page)return;const t=Number.parseInt(u.query.current??"1"),n=s.localStorage.getItem(c)??15;r("update:page",{current:t,size:n})}async function q(){if(!e.query)return;let t={...e.query,...u.query,current:void 0};t=await e.withInitQuery(t),r("update:query",t),y(1,void 0,t)}function y(t=1,n,h){e.noRouteParam||p.replace({path:u.path,query:{current:t,...d(h??e.query)}}),r("search",e.query),n&&g(n)}async function m(){const t=await e.withClear(e.query);e.noRouteParam||await p.replace({path:u.path,query:{current:1,...d(t)}}),r("update:query",t),r("update:page",{...e.page,current:1}),r("search",t),r("clear",t)}function g(t){const n=s.localStorage.getItem(c)??15;e.page&&t!==n&&s.localStorage.set(c,t)}return f("search",y),f("clear",m),o({init:l}),(t,n)=>(w(),S("div",R,[B(t.$slots,"default",{},void 0,!0)]))}});const k=E(x,[["__scopeId","data-v-4d56a49e"]]);export{k as Q};
